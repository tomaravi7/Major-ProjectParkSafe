<!DOCTYPE html>
<html lang="en">

<head>
    <%- include('../partials/head'); %>
        <link href="/css/login.css" rel="stylesheet">
</head>

<body>
    <%- include('../partials/navbar'); %>
        <div class="full gx-0">
            <div class="container-fluid full d-flex justify-content-evenly align-items-center">
                <!--Side1-->
                <div class="d-none d-lg-block">
                    <h1 class="display-1 heading-psf fw-bold">ParkSafe<br>
                        <p class="h2 fw-bold text-center flex-wrap">
                            Parking Made Easy
                        </p>
                    </h1>
                </div>
                <!-- Side2 -->
                <div>
                    <div class="container tablet">
                        <div class="p-2">
                            <div class="p-2"></div>
                            <div class="container tablet">
                                <div class="p-4"></div>
                                <div class="p-1"></div>
                                <div class="m-1 m-md-5">
                                    <p class="d-block d-lg-none text-center h2">ParkSafe</p>
                                    <label for="email" class="col-sm-2 col-form-label">Email</label>
                                    <input type="email" class="form-control form-control-lg form-style" id="email">
                                    <br>
                                    <label for="inputPassword" class="col-sm-2 col-form-label">Password</label>
                                    <input type="password" class="form-control form-style form-control-lg" id="inputPassword">
                                </div>
                                <div class="p-5"></div>



                            </div>
                            <center>
                                <div class="p-2">
                                    <div class="p-1"></div>
                                    <button class="btn-y" onclick="login()">
                                        <b>
                                            Login
                                        </b>
                                    </button>
                                </div>
                            </center>
                        </div>
                    </div>
                </div>
            </div>

            
        </div>
        <script>
            function login() {
                const email = document.getElementById('user_email').value
                const password = document.getElementById('user_password').value
                console.log(email, password)
                fetch('/postapi/login', {
                    method: 'POST',
                    credentials: 'same-origin',
                    headers: {
                        'Accept': 'application/json, text/plain, */*',
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ email, password })
                }).then(res => res.json()).then(data => {
                    console.log(data);
                    if (data.success === false) {
                        alert(data.message)
                        return;
                    }
                    window.location.href = `/user/${data.user.email}`;
                })
            }
        </script>
</body>

</html>